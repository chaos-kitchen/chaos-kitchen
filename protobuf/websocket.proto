syntax = "proto3";

package websocket;

message ClientToServerMessage {
  oneof payload {
    // Lobby messages
    StartGameMessage start_game = 1;
  }
}

message StartGameMessage {
}

message ServerToClientMessage {
  oneof payload {
    // Lobby messages
    LobbyUpdatedMessage lobby_updated = 1;
    GameStartedMessage game_started = 2;

    // Game messages
    TimerUpdateMessage timer_update = 3;
    RoleUpdatedMessage role_updated = 4;
  }
}

message LobbyUpdatedMessage {
  string room_code = 1;
  repeated string player_names = 2;
  bool is_host = 3;
}

message GameStartedMessage {
  string game_room_id = 1;
}

message TimerUpdateMessage {
  int32 remaining_seconds = 1;
}

// Represents an update to the game state
message RoleUpdatedMessage {
  PlayerRole new_role = 1;
}

enum PlayerRole {
  PLAYER_ROLE_UNSPECIFIED = 0;
  PLAYER_ROLE_COOK = 1;
  PLAYER_ROLE_INSTRUCTOR = 2;
}
